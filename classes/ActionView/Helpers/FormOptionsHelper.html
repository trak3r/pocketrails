<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
<meta content="width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; user-scalable=0;" name="viewport"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
    <title>
      Module: ActionView::Helpers::FormOptionsHelper
    </title>
  </head>
  <body>

<div class="toolbar">
    <h1 id="pageTitle">
        ActionView::Helpers::FormOptionsHelper
    </h1>
</div>
<div id="ActionView::Helpers::FormOptionsHelper" title="ActionView::Helpers::FormOptionsHelper" class="panel">
<script type="text/javascript"><!--
google_ad_client = "pub-3648329338598531";
/* Pocket Rails */
google_ad_slot = "9128679516";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />

    <h2>Files</h2>
    <fieldset>
        <div class="row">
            <ul>
                <li>
                    <a href="../../../files/actionpack/lib/action_view/helpers/form_options_helper_rb.html">actionpack/lib/action_view/helpers/form_options_helper.rb</a>
                </li>
            </ul>
        </div>
    </fieldset>
 <!-- banner header -->



<h2>Description</h2><fieldset><div class='row'><p>
Provides a number of methods for turning different kinds of containers into
a set of option tags.
</p>
<h2>Options</h2>
<p>
The <tt><a
href="FormOptionsHelper.html#M001265">collection_select</a></tt>,
<tt>country_select</tt>, <tt><a
href="FormOptionsHelper.html#M001264">select</a></tt>, and <tt><a
href="FormOptionsHelper.html#M001266">time_zone_select</a></tt> methods
take an <tt>options</tt> parameter, a hash.
</p>
<ul>
<li><tt>:include_blank</tt> - set to true or a prompt string if the first
option element of the <a href="FormOptionsHelper.html#M001264">select</a>
element is a blank. Useful if there is not a default value required for the
<a href="FormOptionsHelper.html#M001264">select</a> element.

</li>
</ul>
<p>
For example,
</p>
<pre>
  select(&quot;post&quot;, &quot;category&quot;, Post::CATEGORIES, {:include_blank =&gt; true})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Another common case is a <a
href="FormOptionsHelper.html#M001264">select</a> tag for an
<tt>belongs_to</tt>-associated object.
</p>
<p>
Example with @post.person_id =&gt; 2:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.find(:all).collect {|p| [ p.name, p.id ] }, {:include_blank =&gt; 'None'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;None&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><tt>:prompt</tt> - set to true or a prompt string. When the <a
href="FormOptionsHelper.html#M001264">select</a> element doesn&#8216;t have
a value yet, this prepends an option with a generic prompt &#8212;
&quot;Please <a href="FormOptionsHelper.html#M001264">select</a>&quot;
&#8212; or the given prompt string.

</li>
</ul>
<p>
Example:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.find(:all).collect {|p| [ p.name, p.id ] }, {:prompt =&gt; 'Select Person'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Select Person&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Like the other form helpers, <tt><a
href="FormOptionsHelper.html#M001264">select</a></tt> can accept an
<tt>:index</tt> option to manually set the ID used in the resulting output.
Unlike other helpers, <tt><a
href="FormOptionsHelper.html#M001264">select</a></tt> expects this option
to be in the <tt>html_options</tt> parameter.
</p>
<p>
Example:
</p>
<pre>
  select(&quot;album[]&quot;, &quot;genre&quot;, %w[rap rock country], {}, { :index =&gt; nil })
</pre>
<p>
becomes:
</p>
<pre>
  &lt;select name=&quot;album[][genre]&quot; id=&quot;album__genre&quot;&gt;
    &lt;option value=&quot;rap&quot;&gt;rap&lt;/option&gt;
    &lt;option value=&quot;rock&quot;&gt;rock&lt;/option&gt;
    &lt;option value=&quot;country&quot;&gt;country&lt;/option&gt;
  &lt;/select&gt;
</pre>
</div></fieldset>



<h2>Methods</h2>
<fieldset>
<div class="row">
<ul>
<li><a href="#M001265">collection_select</a></li>
<li><a href="#M001269">option_groups_from_collection_for_select</a></li>
<li><a href="#M001267">options_for_select</a></li>
<li><a href="#M001268">options_from_collection_for_select</a></li>
<li><a href="#M001264">select</a></li>
<li><a href="#M001270">time_zone_options_for_select</a></li>
<li><a href="#M001266">time_zone_select</a></li>
</ul>
</div>
</fieldset>  

<h2>Included Modules</h2>
<fieldset>
<div class="row">
<ul>
<li><a href="../../ERB/Util.html">ERB::Util</a></li>
</ul>
</div>
</fieldset>  





<h2>Public Instance methods</h2>
<h2><a name="M001265">collection_select</a> (object, method, collection, value_method, text_method, options = {}, html_options = {})</h2>

<fieldset><div class='row'><p>
Returns <tt>&lt;<a
href="FormOptionsHelper.html#M001264">select</a>&gt;</tt> and
<tt>&lt;option&gt;</tt> tags for the collection of existing return values
of <tt>method</tt> for <tt>object</tt>&#8216;s class. The value returned
from calling <tt>method</tt> on the instance <tt>object</tt> will be
selected. If calling <tt>method</tt> returns <tt>nil</tt>, no selection is
made without including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
The <tt>:value_method</tt> and <tt>:text_method</tt> parameters are methods
to be called on each member of <tt>collection</tt>. The return values are
used as the <tt>value</tt> attribute and contents of each
<tt>&lt;option&gt;</tt> tag, respectively.
</p>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Post &lt; ActiveRecord::Base
    belongs_to :author
  end
  class Author &lt; ActiveRecord::Base
    has_many :posts
    def name_with_initial
      &quot;#{first_name.first}. #{last_name}&quot;
    end
  end
</pre>
<p>
Sample usage (selecting the associated Author for an instance of Post,
<tt>@post</tt>):
</p>
<pre>
  collection_select(:post, :author_id, Author.find(:all), :id, :name_with_initial, {:prompt =&gt; true})
</pre>
<p>
If <tt>@post.author_id</tt> is already <tt>1</tt>, this would return:
</p>
<pre>
  &lt;select name=&quot;post[author_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Please select&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;D. Heinemeier Hansson&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;D. Thomas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;M. Clark&lt;/option&gt;
  &lt;/select&gt;
</pre></div></fieldset>


<h2><a name="M001269">option_groups_from_collection_for_select</a> (collection, group_method, group_label_method, option_key_method, option_value_method, selected_key = nil)</h2>

<fieldset><div class='row'><p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like <tt><a
href="FormOptionsHelper.html#M001268">options_from_collection_for_select</a></tt>,
but groups them by <tt>&lt;optgroup&gt;</tt> tags based on the object
relationships of the arguments.
</p>
<p>
Parameters:
</p>
<ul>
<li><tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.

</li>
<li><tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.

</li>
<li>group_label_method+ - The name of a method which, when called on a member
of <tt>collection</tt>, returns a string to be used as the <tt>label</tt>
attribute for its <tt>&lt;optgroup&gt;</tt> tag.

</li>
<li><tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.

</li>
<li><tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.

</li>
<li><tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Corresponds to the return value of one of
the calls to <tt>option_key_method</tt>. If <tt>nil</tt>, no selection is
made.

</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Continent &lt; ActiveRecord::Base
    has_many :countries
    # attribs: id, name
  end
  class Country &lt; ActiveRecord::Base
    belongs_to :continent
    # attribs: id, name, continent_id
  end
</pre>
<p>
Sample usage:
</p>
<pre>
  option_groups_from_collection_for_select(@continents, :countries, :name, :id, :name, 3)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;optgroup label=&quot;Africa&quot;&gt;
    &lt;option value=&quot;1&quot;&gt;Egypt&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Rwanda&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Asia&quot;&gt;
    &lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;China&lt;/option&gt;
    &lt;option value=&quot;12&quot;&gt;India&lt;/option&gt;
    &lt;option value=&quot;5&quot;&gt;Japan&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;<a href="FormOptionsHelper.html#M001264">select</a>&gt;</tt> tag.
</p></div></fieldset>


<h2><a name="M001267">options_for_select</a> (container, selected = nil)</h2>

<fieldset><div class='row'><p>
Accepts a container (hash, array, enumerable, your type) and returns a
string of option tags. Given a container where the elements respond to
first and last (such as a two-element array), the &quot;lasts&quot; serve
as option values and the &quot;firsts&quot; as option text. Hashes are
turned into this form automatically, so the keys become &quot;firsts&quot;
and values become lasts. If <tt>selected</tt> is specified, the matching
&quot;last&quot; or element will get the selected option-tag.
<tt>selected</tt> may also be an array of values to be selected when using
a multiple <a href="FormOptionsHelper.html#M001264">select</a>.
</p>
<p>
Examples (call, result):
</p>
<pre>
  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;], [&quot;Kroner&quot;, &quot;DKK&quot;]])
    &lt;option value=&quot;$&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot;&gt;Kroner&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot; ], &quot;MasterCard&quot;)
    &lt;option&gt;VISA&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;MasterCard&lt;/option&gt;

  options_for_select({ &quot;Basic&quot; =&gt; &quot;$20&quot;, &quot;Plus&quot; =&gt; &quot;$40&quot; }, &quot;$40&quot;)
    &lt;option value=&quot;$20&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;$40&quot; selected=&quot;selected&quot;&gt;Plus&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot;, &quot;Discover&quot; ], [&quot;VISA&quot;, &quot;Discover&quot;])
    &lt;option selected=&quot;selected&quot;&gt;VISA&lt;/option&gt;\n&lt;option&gt;MasterCard&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;Discover&lt;/option&gt;
</pre>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML <a href="FormOptionsHelper.html#M001264">select</a> tag.
</p></div></fieldset>


<h2><a name="M001268">options_from_collection_for_select</a> (collection, value_method, text_method, selected = nil)</h2>

<fieldset><div class='row'><p>
Returns a string of option tags that have been compiled by iterating over
the <tt>collection</tt> and assigning the the result of a call to the
<tt>value_method</tt> as the option value and the <tt>text_method</tt> as
the option text. If <tt>selected</tt> is specified, the element returning a
match on <tt>value_method</tt> will get the selected option tag.
</p>
<p>
Example (call, result). Imagine a loop iterating over each <tt>person</tt>
in <tt>@project.people</tt> to generate an input tag:
</p>
<pre>
  options_from_collection_for_select(@project.people, &quot;id&quot;, &quot;name&quot;)
    &lt;option value=&quot;#{person.id}&quot;&gt;#{person.name}&lt;/option&gt;
</pre>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML <a href="FormOptionsHelper.html#M001264">select</a> tag.
</p></div></fieldset>


<h2><a name="M001264">select</a> (object, method, choices, options = {}, html_options = {})</h2>

<fieldset><div class='row'><p>
Create a <a href="FormOptionsHelper.html#M001264">select</a> tag and a
series of contained option tags for the provided object and method. The
option currently held by the object will be selected, provided that the
object is available. See <a
href="FormOptionsHelper.html#M001267">options_for_select</a> for the
required format of the choices parameter.
</p>
<p>
Example with @post.person_id =&gt; 1:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.find(:all).collect {|p| [ p.name, p.id ] }, { :include_blank =&gt; true })
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
This can be used to provide a default set of options in the standard way:
before rendering the create form, a new model instance is assigned the
default options and bound to @model_name. Usually this model is not saved
to the database. Instead, a second model object is created when the create
request is received. This allows the user to submit a form page more than
once with the expected results of creating multiple records. In addition,
this allows a single partial to be used to generate form inputs for both
edit and create forms.
</p>
<p>
By default, <tt>post.person_id</tt> is the selected option. Specify
<tt>:selected =&gt; value</tt> to use a different selection or
<tt>:selected =&gt; nil</tt> to leave all options unselected.
</p></div></fieldset>


<h2><a name="M001270">time_zone_options_for_select</a> (selected = nil, priority_zones = nil, model = ::ActiveSupport::TimeZone)</h2>

<fieldset><div class='row'><p>
Returns a string of option tags for pretty much any time zone in the world.
Supply a TimeZone name as <tt>selected</tt> to have it marked as the
selected option tag. You can also supply an array of TimeZone objects as
<tt>priority_zones</tt>, so that they will be listed above the rest of the
(long) list. (You can use TimeZone.us_zones as a convenience for obtaining
a list of the US time zones, or a Regexp to <a
href="FormOptionsHelper.html#M001264">select</a> the zones of your choice)
</p>
<p>
The <tt>selected</tt> parameter must be either <tt>nil</tt>, or a string
that names a TimeZone.
</p>
<p>
By default, <tt>model</tt> is the TimeZone constant (which can be obtained
in Active Record as a value object). The only requirement is that the
<tt>model</tt> parameter be an object that responds to <tt>all</tt>, and
returns an array of objects that represent time zones.
</p>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML <a href="FormOptionsHelper.html#M001264">select</a> tag.
</p></div></fieldset>


<h2><a name="M001266">time_zone_select</a> (object, method, priority_zones = nil, options = {}, html_options = {})</h2>

<fieldset><div class='row'><p>
Return <a href="FormOptionsHelper.html#M001264">select</a> and option tags
for the given object and method, using <a
href="FormOptionsHelper.html#M001270">time_zone_options_for_select</a> to
generate the list of option tags.
</p>
<p>
In addition to the <tt>:include_blank</tt> option documented above, this
method also supports a <tt>:model</tt> option, which defaults to TimeZone.
This may be used by users to specify a different time zone model object.
(See <tt><a
href="FormOptionsHelper.html#M001270">time_zone_options_for_select</a></tt>
for more information.)
</p>
<p>
You can also supply an array of TimeZone objects as
<tt>priority_zones</tt>, so that they will be listed above the rest of the
(long) list. (You can use TimeZone.us_zones as a convenience for obtaining
a list of the US time zones, or a Regexp to <a
href="FormOptionsHelper.html#M001264">select</a> the zones of your choice)
</p>
<p>
Finally, this method supports a <tt>:default</tt> option, which selects a
default TimeZone if the object&#8216;s time zone is <tt>nil</tt>.
</p>
<p>
Examples:
</p>
<pre>
  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :include_blank =&gt; true)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot; )

  time_zone_select( &quot;user&quot;, 'time_zone', TimeZone.us_zones, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot;)

  time_zone_select( &quot;user&quot;, 'time_zone', [ TimeZone['Alaska'], TimeZone['Hawaii'] ])

  time_zone_select( &quot;user&quot;, 'time_zone', /Australia/)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, TZInfo::Timezone.all.sort, :model =&gt; TZInfo::Timezone)
</pre></div></fieldset>



</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1377203-4");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>